f = @(x) x / (2 * exp(x) - exp(-x));
romberg(f, 0, 1, 30, .000000005)

ans =

   0.098644930068177                   0                   0                   0                   0                   0                   0
   0.142227774086130   0.156755388758781                   0                   0                   0                   0                   0
   0.155890089643840   0.160444194829744   0.160690115234474                   0                   0                   0                   0
   0.159696767901764   0.160965660654405   0.161000425042716   0.161005350595227                   0                   0                   0
   0.160686117916071   0.161015901254174   0.161019250627492   0.161019549446298   0.161019605128067                   0                   0
   0.160936259127519   0.161019639531335   0.161019888749812   0.161019898878738   0.161019900249061   0.161019900537547                   0
   0.160998979531079   0.161019886332265   0.161019902785661   0.161019903008452   0.161019903024647   0.161019903027360   0.161019903027968

f = @(x) cos (exp(x))

f = 

    @(x)cos(exp(x))

romberg(f, 0, pi, 30, .000000005)

ans =

  Columns 1 through 7

   0.206400657700827                   0                   0                   0                   0                   0                   0
   0.257030276120599   0.273906815593856                   0                   0                   0                   0                   0
  -0.667389683110209  -0.975529669520478  -1.058825435194767                   0                   0                   0                   0
  -0.818478582581498  -0.868841549071927  -0.861729007708691  -0.858600492986689                   0                   0                   0
  -0.278012950965426  -0.097857740426735  -0.046458819850389  -0.033518023217718  -0.030282405689212                   0                   0
  -0.356789537332442  -0.383048399454781  -0.402061110056650  -0.407705590853575  -0.409172993079598  -0.409543365110283                   0
  -0.371443261087476  -0.376327835672488  -0.375879798087001  -0.375464221706531  -0.375337784964778  -0.375304710470042  -0.375296349382218
  -0.374832748158946  -0.375962577182769  -0.375938226616788  -0.375939154053768  -0.375941016533561  -0.375941606202739  -0.375941761732832
  -0.375664555192981  -0.375941824204326  -0.375940440672430  -0.375940475816170  -0.375940480999552  -0.375940480476059  -0.375940480201156
  -0.375871557614628  -0.375940558421843  -0.375940474036344  -0.375940474565930  -0.375940474561027  -0.375940474554733  -0.375940474553287
  -0.375923249248104  -0.375940479792596  -0.375940474550646  -0.375940474558810  -0.375940474558782  -0.375940474558780  -0.375940474558781

  Columns 8 through 11

                   0                   0                   0                   0
                   0                   0                   0                   0
                   0                   0                   0                   0
                   0                   0                   0                   0
                   0                   0                   0                   0
                   0                   0                   0                   0
                   0                   0                   0                   0
  -0.375941801128081                   0                   0                   0
  -0.375940480122933  -0.375940480102775                   0                   0
  -0.375940474552943  -0.375940474552858  -0.375940474552837                   0
  -0.375940474558781  -0.375940474558781  -0.375940474558781  -0.375940474558781

f = @(x) x ^ x;
romberg(f, 0, 1, 30, .000000005)

ans =

  Columns 1 through 7

   1.000000000000000                   0                   0                   0                   0                   0                   0
   0.853553390593274   0.804737854124365                   0                   0                   0                   0                   0
   0.805035252810188   0.788862540215826   0.787804185955256                   0                   0                   0                   0
   0.789835394762909   0.784768775413816   0.784495857760349   0.784443344614398                   0                   0                   0
   0.785275686083475   0.783755783190330   0.783688250375431   0.783675431210591   0.783672419785478                   0                   0
   0.783951193948147   0.783509696569705   0.783493290794996   0.783490196198481   0.783489469786669   0.783489290949916                   0
   0.783575239186918   0.783449920933175   0.783445935890740   0.783445184225593   0.783445007708053   0.783444964245610   0.783444953421018
   0.783470285367779   0.783435300761399   0.783434326083281   0.783434141800623   0.783434098496995   0.783434087833055   0.783434085177032
   0.783441345373574   0.783431698708839   0.783431458572002   0.783431413055950   0.783431402354991   0.783431399719466   0.783431399063028
   0.783433441079184   0.783430806314388   0.783430746821424   0.783430735523796   0.783430732866807   0.783430732212371   0.783430732049366
   0.783431298579103   0.783430584412409   0.783430569618944   0.783430566806206   0.783430566144568   0.783430565981595   0.783430565941001
   0.783430721476497   0.783430529108962   0.783430525422065   0.783430524720528   0.783430524555486   0.783430524514832   0.783430524504705
   0.783430566849681   0.783430515307409   0.783430514387305   0.783430514212150   0.783430514170941   0.783430514160790   0.783430514158261
   0.783430525607728   0.783430511860411   0.783430511630611   0.783430511586854   0.783430511576559   0.783430511574023   0.783430511573391

  Columns 8 through 14

                   0                   0                   0                   0                   0                   0                   0
                   0                   0                   0                   0                   0                   0                   0
                   0                   0                   0                   0                   0                   0                   0
                   0                   0                   0                   0                   0                   0                   0
                   0                   0                   0                   0                   0                   0                   0
                   0                   0                   0                   0                   0                   0                   0
                   0                   0                   0                   0                   0                   0                   0
   0.783434084513647                   0                   0                   0                   0                   0                   0
   0.783431398899070   0.783431398858090                   0                   0                   0                   0                   0
   0.783430732008652   0.783430731998476   0.783430731995932                   0                   0                   0                   0
   0.783430565930862   0.783430565928328   0.783430565927694   0.783430565927536                   0                   0                   0
   0.783430524502176   0.783430524501544   0.783430524501386   0.783430524501346   0.783430524501336                   0                   0
   0.783430514157630   0.783430514157472   0.783430514157433   0.783430514157423   0.783430514157420   0.783430514157420                   0
   0.783430511573233   0.783430511573194   0.783430511573184   0.783430511573182   0.783430511573181   0.783430511573181   0.783430511573181

f = @(x) ln(cos(x) + sin(x));
romberg(f, 0, pi / 2, 30, .000000005)
{Undefined function 'ln' for input arguments of type 'double'.

Error in <a href="matlab:helpUtils.errorDocCallback('@(x)ln(cos(x)+sin(x))', '', 0)" style="font-weight:bold">@(x)ln(cos(x)+sin(x))</a>


Error in <a href="matlab:helpUtils.errorDocCallback('romberg', '/home/wcmonty/Projects/471/romberg.m', 9)" style="font-weight:bold">romberg</a> (<a href="matlab: opentoline('/home/wcmonty/Projects/471/romberg.m',9,0)">line 9</a>)
r(1,1) = (b-a) * (f(a) + f(b))/2;
} 
f = @(x) log(cos(x) + sin(x));
romberg(f, 0, pi / 2, 30, .000000005)

ans =

                   0                   0                   0                   0                   0                   0                   0
   0.272198261287950   0.362931015050600                   0                   0                   0                   0                   0
   0.346114598256085   0.370753377245463   0.371274868058454                   0                   0                   0                   0
   0.365159772802427   0.371508164317875   0.371558483456035   0.371562985287743                   0                   0                   0
   0.369963718177675   0.371565033302758   0.371568824568417   0.371568988713057   0.371569012255902                   0                   0
   0.371167540807841   0.371568815017897   0.371569067132239   0.371569070982459   0.371569071305084   0.371569071362805                   0
   0.371468676824340   0.371569055496506   0.371569071528414   0.371569071598194   0.371569071600609   0.371569071600898   0.371569071600956

diary off
